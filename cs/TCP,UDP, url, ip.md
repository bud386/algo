# URL

Uniform Resource Locators (URLs)

- URL은 웹에 게시된 어떤 자원을 찾기 위해서 [browsers](https://developer.mozilla.org/ko/docs/Glossary/Browser)에 의해 사용되는 메카니즘
-  웹 자원의 통일된 위치 지정 방식



1. 브라우저의 url 파싱

   - url을 입력받은 브라우저가 url의 구조를 해석한다.

   - 어떤 프로토콜로 어느 도메인으로 어떤 포트로 보낼것인지.

     > 어떤 프로토콜을 통해 url에 요청할것인지
     >
     > 어떤 url로 요청할것인지
     >
     > 어떤 포트로 요청할것인지

   - 명시적으로 포트를 선언하지 않았다면 브라우저에서 설정된 기본값 설정

     > http: 80, https: 443 포트를 기본값으로 사용

     

2. HSTS 목록 조회

   - HSTS(HTTP Strict transport security), HTTP를 허용하지 않고 HTTPS를 사용하는 연결만 허용하는 기능입니다. 만약 HTTP로 요청이 왔다면 HTTP 응답 헤더에 "Strict Transport Security"라는 필드를 포함하여 응답하고 이를 확인한 브라우저는 해당 서버에 요청할 때 HTTPS만을 통해 통신하게 됩니다. 그리고 자신의 HSTS캐시에 해당 URL을 저장하는데 이를 HSTS 목록이라고 부릅니다.

     

     이를 통해 브라우저에서는 이 HSTS 목록 조회를 통해 해당 요청을 HTTPS로 보낼지 판단합니다. HSTS목록에 해당 URL이 존재한다면 명시적으로 HTTP를 통해 요청한다 해도 브라우저가 이를 HTTPS로 요청합니다.

3. URL을 ip 주소로 변환

   - 주소로는 컴퓨터끼리 통신할 수 없습니다. 이를 인터넷 상에서 컴퓨터가 읽을 수 있는 IP주소로 변환해야 서로 통신이 가능하게 됩니다. 우선 브라우저에서는 자신의 로컬 hosts 파일과 브라우저 캐시에 해당 URL이 존재하는지 확인합니다. 존재하지 않는다면 도메인 주소를 IP주소로 변환해주는 DNS(Domain Name System) 서버에 요청하여 해당 URL을 IP주소로 변환합니다. 

   - URL(Uniform Resource Locator)주소를 입력하면, 사용자가 입력한 URL 주소 중에 도메인 네임 부분을 DNS(Domain Name Server) 에서 검색한다.

4. 라우터를 통해 해당 서버의 게이트웨이까지 이동

   - DNS서버에게 IP주소를 받았으니 이제 해당 서버로 요청을 보냅니다.
   -  IP주소로 가야 하는 것은 알지만 어떻게 가야 할지 경로는 알 수 없습니다. 이 요청이 네트워크를 타고 어떻게 이동할지는 네트워크 장비인 라우터의 라우팅을 통해 이루어집니다.

   - 라우터에서는 라우팅 테이블을 통해 해당 요청이 어떤 경로를 통해 가야할지 경로를 지정해줍니다

   

5. ARP를 통해 IP주소를 MAC주소로 변환

   - 실질적인 통신을 하기 위해서는 논리 주소인 IP주소를 물리 주소인 MAC 주소로 변환해야 합니다. 이를 위해 해당 네트워크 내에서 ARP를 브로드 캐스팅합니다. 해당 IP주소를 가지고 있는 노드는 자신의 MAC 주소를 응답합니다.

   > ARP : **주소 결정 프로토콜**(Address Resolution Protocol, **ARP**)은 [네트워크](https://ko.wikipedia.org/wiki/네트워크) 상에서 [IP 주소](https://ko.wikipedia.org/wiki/IP_주소)를 물리적 네트워크 [주소](https://ko.wikipedia.org/wiki/주소)로 대응(bind)시키기 위해 사용되는 [프로토콜](https://ko.wikipedia.org/wiki/통신_프로토콜)이다.

   

6. 대상 서버와 TCP 소켓 연결

   - 이제 대상 서버와 통신하기 위해 TCP 소켓 연결을 진행합니다

   

7. HTTP(HTTPS) 프로토콜로 요청, 응답

   - 이제 연결이 확정되었으니 드디어 해당 페이지를 달라고 서버에게 요청합니다. 서버에서 해당 요청을 받고, 이 요청을 수락할 수 있는지 검사합니다. 그리고 서버는 이 요청에 대한 응답을 생성하여 브라우저에게 전달합니다.

   

8. 브라우저에서 응답을 해석

   - 서버에서 응답한 내용은 HTML, CSS, Javascript 등으로 이루어져 있다.
   - 이를 브라우저에서 해석하여 그려줍니다. 각종 텍스트를 정해진 형식으로 해석하여 우리가 원하는 페이지가 그려집니다.



# TCP와 UDP의 차이

 `TCP`와 `UDP`는 TCP/IP의 `전송계층`에서 사용되는 프로토콜이다. **전송계층은 IP에 의해 전달되는 패킷의 오류를 검사하고 재전송 요구 등의 제어를 담당**하는 계층이다.

| TCP                                                          | UDP                                                          |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| Connection-oriented protocol (연결지향형 프로토콜)           | Connection-less protocol (비 연결지향형 프로토콜)            |
| Connection by **byte** stream (바이트 스트림을 통한 연결)    | Connection by **message** stream (메세지 스트림을 통한 연결) |
| Congestion / Flow control (혼잡제어, 흐름제어)               | NO Congestion / Flow control (혼잡제어와 흐름제어 지원 X)    |
| Ordered, Lower speed (순서 보장, 상대적으로 느림)            | Not ordered, Higer speed (순서 보장되지 않음, 상대적으로 빠름) |
| Reliable data transmission (신뢰성 있는 데이터 전송 - 안정적) | Unreliable data transmission (데이터 전송 보장 X)            |
| TCP packet : Segment (세그먼트 TCP 패킷)                     | UDP packet : Datagram (데이터그램 UDP 패킷)                  |
| HTTP, Email, File transfer 에서 사용                         | DNS, Broadcasting (도메인, 실시간 동영상 서비스에서 사용)    |

## 차이점

| TCP(Transfer Control Protocol)                     | UDP(User Datagram Protocol)                             |
| -------------------------------------------------- | ------------------------------------------------------- |
| 연결이 성공해야 통신 가능(연결형 프로토콜)         | 비연결형 프로토콜(연결 없이 통신이 가능)                |
| 데이터의 경계를 구분하지 않음(Byte-Stream Service) | 데이터의 경계를 구분함(Datagram Service)                |
| 신뢰성 있는 데이터 전송(데이터의 재전송 존재)      | 비신뢰성 있는 데이터 전송(데이터의 재전송 없음)         |
| 일 대 일(Unicast) 통신                             | 일 대 일, 일 대 다(Broadcast), 다 대 다(Multicast) 통신 |

### TCP

- 신뢰성이 요구되는 애플리케이션에서는 TCP
- 연결형 서비스
- 흐름제어
  - 데이터 처리 속도를 조절하여 수신자의 버퍼 오버플로우를 방지
  - 송신하는 곳에서 감당이 안되게 많은 데이터를 빠르게 보내 수신하는 곳에서 문제가 일어나는 것을 막는다.
- 혼잡제어
  - 네트워크 내의 패킷 수가 넘치게 증가하지 않도록 방지
- 신뢰성이 높은 전송
- 전이중 방식(full Duplex)
  - 전송이 양방향으로 동시에 가능
- 점재점 방식(Point to Point)
  - 각 연결이 2개의 종단점

### UDP

- 간단한 데이터를 빠른 속도로 전송하고자 하는 애플리케이션에서는 UDP를 사용
- 정보를 주고 받을 때 정보를 보내거나 받는다는 신호절차를 거치지 않는다.
- 흐름제어(flow control)가 없어서 패킷이 제대로 전송되었는지, 오류가 없는지 확인할 수 없다.
- 소켓 대신 IP를 기반으로 데이터를 전송한다.
- 데이터그램(메세지) 단위로 전송되며 그 크기는 65535바이트로, 크기가 초과하면 잘라서 보낸다.

TCP 헤더와 다르게 UDP 헤더에는 포함된 정보가 부실한 느낌마저 든다.
UDP는 수신자가 데이터를 받는지 마는지 관심이 없기 때문이다. 즉, 신뢰성을 보장해주지 않지만 간단하고 속도가 빠른 것이 특징이다.







# IP 인터넷 프로토콜

**인터넷 [프로토콜](https://ko.wikipedia.org/wiki/통신_프로토콜)**(**IP**, **I**nternet **P**rotocol)은 송신 [호스트](https://ko.wikipedia.org/wiki/호스트_(네트워크))와 수신 호스트가 [패킷 교환 네트워크](https://ko.wikipedia.org/wiki/패킷_교환_네트워크)(패킷 스위칭 네트워크, Packet Switching Network)에서 정보를 주고받는 데 사용하는 정보 위주의 규약(프로토콜, Protocol)이며, OSI 네트워크 계층에서 호스트의 주소지정과 패킷 분할 및 조립 기능을 담당한다. 줄여서 **아이피**(IP)라고도 한다.

IP의 정보는 [패킷](https://ko.wikipedia.org/wiki/패킷) 혹은 [데이터그램](https://ko.wikipedia.org/wiki/데이터그램)이라고 하는 덩어리로 나뉘어 전송된다. IP에서는 이전에 통신한 적 없는 호스트에 패킷을 보낼 때 경로 설정이 필요없다.

**인터넷 프로토콜**(**IP**)로 인터넷에 대해 신뢰할 수 없는 비연결 패킷 전달을 제공합니다.

 이 프로토콜에서는 메시지가 목표로 하는 컴퓨터에 **잘 도착**하도록 해주는 역할

호스트간의 통신만을 담당

- 비연결성
  -  정보 패킷을 독립적으로 다루기 때문
- 비신뢰성
  - 흐름에 관여하지 않는다
  - 보낸 정보가 제대로 갔는지 보장하지 않는다느 뜻 (패킷 손상, 순서 변경, 중복 전송)
  - 전송과 순서를 보장하기 위해서는  [TCP](https://ko.wikipedia.org/wiki/전송_제어_프로토콜) 프로토콜과 같은 IP의 상위 프로토콜을 이용해야 한다.



**IP는 각 패킷을 주소 지정하고 라우팅하여 올바른 목적지에 도달하도록 하는 방법을 정의한다.** 

**네트워크의 각 게이트웨이 시스템은 이 IP 주소를 확인하여 메시지를 전달할 위치를 결정한다.**

**서브넷 마스크는 컴퓨터 또는 다른 네트워크 장치에 네트워크를 나타내는 데 사용되는 IP 주소의 부분과** 

**네트워크의 호스트(다른 컴퓨터)를 나타내는 데 사용되는 부분을 알려주는 것이다.**







**TCP는 애플리케이션이 네트워크를 통해 통신 채널을 만드는 방법을 정의한다.** 

**또한 메시지가 인터넷을 통해 전송되고 목적지 주소에서 올바른 순서로 재조립되기 전에 메시지를 더 작은 패킷으로** 

**조립하는 방법을 관리한다.**